{"ast":null,"code":"import _objectSpread from\"C:/Users/VuppalaShreya/Downloads/leave-management-system/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";/**\r\n * LeaveTable\r\n *\r\n * Props:\r\n *  - leaveRequests : array of LeaveRequestDto objects from the backend\r\n *  - showActions   : boolean — show Approve / Reject buttons (Manager view)\r\n *  - onAction      : (leaveId, isApprove, comment) => void\r\n *  - loading       : boolean — disables buttons while a request is in flight\r\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LeaveTable(_ref){let{leaveRequests=[],showActions=false,onAction=()=>{},loading=false}=_ref;// Per-row comment state: { [leaveId]: string }\nconst[comments,setComments]=useState({});const handleCommentChange=(id,value)=>{setComments(prev=>_objectSpread(_objectSpread({},prev),{},{[id]:value}));};const handleAction=(id,isApprove)=>{onAction(id,isApprove,comments[id]||\"\");// Clear comment after action\nsetComments(prev=>_objectSpread(_objectSpread({},prev),{},{[id]:\"\"}));};if(!leaveRequests.length){return/*#__PURE__*/_jsx(\"p\",{children:\"No leave records found.\"});}return/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[showActions&&/*#__PURE__*/_jsx(\"th\",{children:\"Employee\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Start Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"End Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Reason\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Manager Comment\"}),showActions&&/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:leaveRequests.map(r=>{var _r$leaveType;// ── FIX: use leaveTypeName (populated by backend toDto) ──────────────\nconst typeName=r.leaveTypeName||((_r$leaveType=r.leaveType)===null||_r$leaveType===void 0?void 0:_r$leaveType.type)||r.leaveTypeId||\"—\";// ── FIX: status comes from backend DTO now; guard against undefined ──\nconst status=r.status||\"UNKNOWN\";const isPending=status===\"PENDING\";return/*#__PURE__*/_jsxs(\"tr\",{children:[showActions&&/*#__PURE__*/_jsx(\"td\",{children:r.employeeName||\"—\"}),/*#__PURE__*/_jsx(\"td\",{children:typeName}),/*#__PURE__*/_jsx(\"td\",{children:r.startDate}),/*#__PURE__*/_jsx(\"td\",{children:r.endDate}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:600,color:status===\"APPROVED\"?\"#16a34a\":status===\"REJECTED\"?\"#dc2626\":\"#d97706\"},children:status})}),/*#__PURE__*/_jsx(\"td\",{children:r.reason||r.notes||\"—\"}),/*#__PURE__*/_jsx(\"td\",{children:r.managerComment||\"—\"}),showActions&&/*#__PURE__*/_jsxs(\"td\",{style:{whiteSpace:\"nowrap\"},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-approve\",onClick:()=>handleAction(r.id,true),disabled:!isPending||loading,title:!isPending?\"Cannot approve \\u2014 status is \".concat(status):\"Approve leave\",style:{marginRight:4,background:!isPending?\"#ccc\":\"#16a34a\",color:\"#fff\",border:\"none\",padding:\"4px 10px\",borderRadius:4,cursor:!isPending||loading?\"not-allowed\":\"pointer\"},children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-reject\",onClick:()=>handleAction(r.id,false),disabled:!isPending||loading,title:!isPending?\"Cannot reject \\u2014 status is \".concat(status):\"Reject leave\",style:{marginRight:4,background:!isPending?\"#ccc\":\"#dc2626\",color:\"#fff\",border:\"none\",padding:\"4px 10px\",borderRadius:4,cursor:!isPending||loading?\"not-allowed\":\"pointer\"},children:\"Reject\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Comment (optional)\",value:comments[r.id]||\"\",onChange:e=>handleCommentChange(r.id,e.target.value),disabled:!isPending||loading,style:{marginTop:2,width:\"130px\",fontSize:\"0.8rem\"}})]})]},r.id);})})]});}export default LeaveTable;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","LeaveTable","_ref","leaveRequests","showActions","onAction","loading","comments","setComments","handleCommentChange","id","value","prev","_objectSpread","handleAction","isApprove","length","children","className","map","r","_r$leaveType","typeName","leaveTypeName","leaveType","type","leaveTypeId","status","isPending","employeeName","startDate","endDate","style","fontWeight","color","reason","notes","managerComment","whiteSpace","onClick","disabled","title","concat","marginRight","background","border","padding","borderRadius","cursor","placeholder","onChange","e","target","marginTop","width","fontSize"],"sources":["C:/Users/VuppalaShreya/Downloads/leave-management-system/frontend/src/components/LeaveTable.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\n\r\n/**\r\n * LeaveTable\r\n *\r\n * Props:\r\n *  - leaveRequests : array of LeaveRequestDto objects from the backend\r\n *  - showActions   : boolean — show Approve / Reject buttons (Manager view)\r\n *  - onAction      : (leaveId, isApprove, comment) => void\r\n *  - loading       : boolean — disables buttons while a request is in flight\r\n */\r\nfunction LeaveTable({\r\n  leaveRequests = [],\r\n  showActions = false,\r\n  onAction = () => {},\r\n  loading = false,\r\n}) {\r\n  // Per-row comment state: { [leaveId]: string }\r\n  const [comments, setComments] = useState({});\r\n\r\n  const handleCommentChange = (id, value) => {\r\n    setComments(prev => ({ ...prev, [id]: value }));\r\n  };\r\n\r\n  const handleAction = (id, isApprove) => {\r\n    onAction(id, isApprove, comments[id] || \"\");\r\n    // Clear comment after action\r\n    setComments(prev => ({ ...prev, [id]: \"\" }));\r\n  };\r\n\r\n  if (!leaveRequests.length) {\r\n    return <p>No leave records found.</p>;\r\n  }\r\n\r\n  return (\r\n    <table className=\"table\">\r\n      <thead>\r\n        <tr>\r\n          {/* Show employee name only in manager / admin view */}\r\n          {showActions && <th>Employee</th>}\r\n          <th>Type</th>\r\n          <th>Start Date</th>\r\n          <th>End Date</th>\r\n          <th>Status</th>\r\n          <th>Reason</th>\r\n          <th>Manager Comment</th>\r\n          {showActions && <th>Action</th>}\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {leaveRequests.map(r => {\r\n          // ── FIX: use leaveTypeName (populated by backend toDto) ──────────────\r\n          const typeName   = r.leaveTypeName || r.leaveType?.type || r.leaveTypeId || \"—\";\r\n          // ── FIX: status comes from backend DTO now; guard against undefined ──\r\n          const status     = r.status || \"UNKNOWN\";\r\n          const isPending  = status === \"PENDING\";\r\n\r\n          return (\r\n            <tr key={r.id}>\r\n              {showActions && <td>{r.employeeName || \"—\"}</td>}\r\n              <td>{typeName}</td>\r\n              <td>{r.startDate}</td>\r\n              <td>{r.endDate}</td>\r\n              <td>\r\n                <span\r\n                  style={{\r\n                    fontWeight: 600,\r\n                    color:\r\n                      status === \"APPROVED\"\r\n                        ? \"#16a34a\"\r\n                        : status === \"REJECTED\"\r\n                        ? \"#dc2626\"\r\n                        : \"#d97706\",\r\n                  }}\r\n                >\r\n                  {status}\r\n                </span>\r\n              </td>\r\n              <td>{r.reason || r.notes || \"—\"}</td>\r\n              <td>{r.managerComment || \"—\"}</td>\r\n\r\n              {showActions && (\r\n                <td style={{ whiteSpace: \"nowrap\" }}>\r\n                  {/* ── FIX: buttons disabled only when NOT pending or a request is in flight ── */}\r\n                  <button\r\n                    className=\"btn-approve\"\r\n                    onClick={() => handleAction(r.id, true)}\r\n                    disabled={!isPending || loading}\r\n                    title={!isPending ? `Cannot approve — status is ${status}` : \"Approve leave\"}\r\n                    style={{\r\n                      marginRight: 4,\r\n                      background: !isPending ? \"#ccc\" : \"#16a34a\",\r\n                      color: \"#fff\",\r\n                      border: \"none\",\r\n                      padding: \"4px 10px\",\r\n                      borderRadius: 4,\r\n                      cursor: !isPending || loading ? \"not-allowed\" : \"pointer\",\r\n                    }}\r\n                  >\r\n                    Approve\r\n                  </button>\r\n\r\n                  <button\r\n                    className=\"btn-reject\"\r\n                    onClick={() => handleAction(r.id, false)}\r\n                    disabled={!isPending || loading}\r\n                    title={!isPending ? `Cannot reject — status is ${status}` : \"Reject leave\"}\r\n                    style={{\r\n                      marginRight: 4,\r\n                      background: !isPending ? \"#ccc\" : \"#dc2626\",\r\n                      color: \"#fff\",\r\n                      border: \"none\",\r\n                      padding: \"4px 10px\",\r\n                      borderRadius: 4,\r\n                      cursor: !isPending || loading ? \"not-allowed\" : \"pointer\",\r\n                    }}\r\n                  >\r\n                    Reject\r\n                  </button>\r\n\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Comment (optional)\"\r\n                    value={comments[r.id] || \"\"}\r\n                    onChange={e => handleCommentChange(r.id, e.target.value)}\r\n                    disabled={!isPending || loading}\r\n                    style={{ marginTop: 2, width: \"130px\", fontSize: \"0.8rem\" }}\r\n                  />\r\n                </td>\r\n              )}\r\n            </tr>\r\n          );\r\n        })}\r\n      </tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\nexport default LeaveTable;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}