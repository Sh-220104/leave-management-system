{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"../api\";import LeaveBalanceTable from\"../components/LeaveBalanceTable\";import LeaveTable from\"../components/LeaveTable\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function EmployeeDashboard(){const[balances,setBalances]=useState([]);const[leaves,setLeaves]=useState([]);const userId=localStorage.getItem(\"userId\");const userRole=localStorage.getItem(\"role\");useEffect(()=>{// Only call API if userId is valid and role is EMPLOYEE\nif(!userId||userRole!==\"EMPLOYEE\"){setBalances([]);setLeaves([]);return;}axios.get(\"/balance/\".concat(userId)).then(res=>setBalances(res.data)).catch(()=>setBalances([]));axios.get(\"/leaves/employee/\".concat(userId)).then(res=>setLeaves(res.data)).catch(()=>setLeaves([]));},[userId,userRole]);if(userRole!==\"EMPLOYEE\"){// Hide the employee dashboard completely for non-employees\nreturn/*#__PURE__*/_jsx(\"div\",{style:{marginTop:40,textAlign:\"center\"},children:/*#__PURE__*/_jsx(\"h2\",{children:\"Not authorized to view this page.\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Leave Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Your Leave Balance\"}),balances&&balances.length>0?/*#__PURE__*/_jsx(LeaveBalanceTable,{balances:balances}):/*#__PURE__*/_jsx(\"p\",{children:\"No leave balance data.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Your Leave Requests\"}),leaves&&leaves.length>0?/*#__PURE__*/_jsx(LeaveTable,{leaveRequests:leaves,showActions:false}):/*#__PURE__*/_jsx(\"p\",{children:\"No leave requests.\"})]}),!userId&&/*#__PURE__*/_jsxs(\"div\",{style:{color:\"red\"},children:[\"User not logged in. Please \",/*#__PURE__*/_jsx(\"a\",{href:\"/login\",children:\"login\"}),\".\"]})]});}export default EmployeeDashboard;","map":{"version":3,"names":["React","useEffect","useState","axios","LeaveBalanceTable","LeaveTable","jsx","_jsx","jsxs","_jsxs","EmployeeDashboard","balances","setBalances","leaves","setLeaves","userId","localStorage","getItem","userRole","get","concat","then","res","data","catch","style","marginTop","textAlign","children","className","length","leaveRequests","showActions","color","href"],"sources":["C:/Users/VuppalaShreya/Downloads/leave-management-system/frontend/src/pages/EmployeeDashboard.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"../api\";\r\nimport LeaveBalanceTable from \"../components/LeaveBalanceTable\";\r\nimport LeaveTable from \"../components/LeaveTable\";\r\n\r\nfunction EmployeeDashboard() {\r\n  const [balances, setBalances] = useState([]);\r\n  const [leaves, setLeaves] = useState([]);\r\n  const userId = localStorage.getItem(\"userId\");\r\n  const userRole = localStorage.getItem(\"role\");\r\n\r\n  useEffect(() => {\r\n    // Only call API if userId is valid and role is EMPLOYEE\r\n    if (!userId || userRole !== \"EMPLOYEE\") {\r\n      setBalances([]);\r\n      setLeaves([]);\r\n      return;\r\n    }\r\n    axios.get(`/balance/${userId}`)\r\n      .then(res => setBalances(res.data))\r\n      .catch(() => setBalances([]));\r\n\r\n    axios.get(`/leaves/employee/${userId}`)\r\n      .then(res => setLeaves(res.data))\r\n      .catch(() => setLeaves([]));\r\n  }, [userId, userRole]);\r\n\r\n  if (userRole !== \"EMPLOYEE\") {\r\n    // Hide the employee dashboard completely for non-employees\r\n    return (\r\n      <div style={{marginTop: 40, textAlign: \"center\"}}>\r\n        <h2>Not authorized to view this page.</h2>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      <h2>Your Leave Dashboard</h2>\r\n      <div className=\"dashboard-section\">\r\n        <h3>Your Leave Balance</h3>\r\n        {balances && balances.length > 0\r\n          ? (<LeaveBalanceTable balances={balances} />)\r\n          : (<p>No leave balance data.</p>)}\r\n      </div>\r\n      <div className=\"dashboard-section\">\r\n        <h3>Your Leave Requests</h3>\r\n        {leaves && leaves.length > 0\r\n          ? (<LeaveTable leaveRequests={leaves} showActions={false} />)\r\n          : (<p>No leave requests.</p>)}\r\n      </div>\r\n      {!userId && (\r\n        <div style={{color: \"red\"}}>\r\n          User not logged in. Please <a href=\"/login\">login</a>.\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EmployeeDashboard;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,QAAQ,CAC1B,MAAO,CAAAC,iBAAiB,KAAM,iCAAiC,CAC/D,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElD,QAAS,CAAAC,iBAAiBA,CAAA,CAAG,CAC3B,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACW,MAAM,CAAEC,SAAS,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAAAa,MAAM,CAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAC7C,KAAM,CAAAC,QAAQ,CAAGF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAE7ChB,SAAS,CAAC,IAAM,CACd;AACA,GAAI,CAACc,MAAM,EAAIG,QAAQ,GAAK,UAAU,CAAE,CACtCN,WAAW,CAAC,EAAE,CAAC,CACfE,SAAS,CAAC,EAAE,CAAC,CACb,OACF,CACAX,KAAK,CAACgB,GAAG,aAAAC,MAAA,CAAaL,MAAM,CAAE,CAAC,CAC5BM,IAAI,CAACC,GAAG,EAAIV,WAAW,CAACU,GAAG,CAACC,IAAI,CAAC,CAAC,CAClCC,KAAK,CAAC,IAAMZ,WAAW,CAAC,EAAE,CAAC,CAAC,CAE/BT,KAAK,CAACgB,GAAG,qBAAAC,MAAA,CAAqBL,MAAM,CAAE,CAAC,CACpCM,IAAI,CAACC,GAAG,EAAIR,SAAS,CAACQ,GAAG,CAACC,IAAI,CAAC,CAAC,CAChCC,KAAK,CAAC,IAAMV,SAAS,CAAC,EAAE,CAAC,CAAC,CAC/B,CAAC,CAAE,CAACC,MAAM,CAAEG,QAAQ,CAAC,CAAC,CAEtB,GAAIA,QAAQ,GAAK,UAAU,CAAE,CAC3B;AACA,mBACEX,IAAA,QAAKkB,KAAK,CAAE,CAACC,SAAS,CAAE,EAAE,CAAEC,SAAS,CAAE,QAAQ,CAAE,CAAAC,QAAA,cAC/CrB,IAAA,OAAAqB,QAAA,CAAI,mCAAiC,CAAI,CAAC,CACvC,CAAC,CAEV,CAEA,mBACEnB,KAAA,QAAKoB,SAAS,CAAC,qBAAqB,CAAAD,QAAA,eAClCrB,IAAA,OAAAqB,QAAA,CAAI,sBAAoB,CAAI,CAAC,cAC7BnB,KAAA,QAAKoB,SAAS,CAAC,mBAAmB,CAAAD,QAAA,eAChCrB,IAAA,OAAAqB,QAAA,CAAI,oBAAkB,CAAI,CAAC,CAC1BjB,QAAQ,EAAIA,QAAQ,CAACmB,MAAM,CAAG,CAAC,cAC3BvB,IAAA,CAACH,iBAAiB,EAACO,QAAQ,CAAEA,QAAS,CAAE,CAAC,cACzCJ,IAAA,MAAAqB,QAAA,CAAG,wBAAsB,CAAG,CAAE,EAChC,CAAC,cACNnB,KAAA,QAAKoB,SAAS,CAAC,mBAAmB,CAAAD,QAAA,eAChCrB,IAAA,OAAAqB,QAAA,CAAI,qBAAmB,CAAI,CAAC,CAC3Bf,MAAM,EAAIA,MAAM,CAACiB,MAAM,CAAG,CAAC,cACvBvB,IAAA,CAACF,UAAU,EAAC0B,aAAa,CAAElB,MAAO,CAACmB,WAAW,CAAE,KAAM,CAAE,CAAC,cACzDzB,IAAA,MAAAqB,QAAA,CAAG,oBAAkB,CAAG,CAAE,EAC5B,CAAC,CACL,CAACb,MAAM,eACNN,KAAA,QAAKgB,KAAK,CAAE,CAACQ,KAAK,CAAE,KAAK,CAAE,CAAAL,QAAA,EAAC,6BACC,cAAArB,IAAA,MAAG2B,IAAI,CAAC,QAAQ,CAAAN,QAAA,CAAC,OAAK,CAAG,CAAC,IACvD,EAAK,CACN,EACE,CAAC,CAEV,CAEA,cAAe,CAAAlB,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}